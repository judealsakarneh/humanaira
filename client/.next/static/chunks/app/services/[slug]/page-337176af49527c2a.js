(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9805],{63:(e,s,t)=>{"use strict";var l=t(7260);t.o(l,"useParams")&&t.d(s,{useParams:function(){return l.useParams}}),t.o(l,"useRouter")&&t.d(s,{useRouter:function(){return l.useRouter}})},907:(e,s,t)=>{"use strict";t.d(s,{l:()=>r});var l=t(7559);function r(){return(0,l.createBrowserClient)("https://ekjxetwphxedvoeywebe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVranhldHdwaHhlZHZvZXl3ZWJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzOTI5OTgsImV4cCI6MjA3MDk2ODk5OH0.N6snPBUY7YX5ZVyRTTuPJ_hHJk9-iLwoyzJinZzBCMc")}},8002:(e,s,t)=>{Promise.resolve().then(t.bind(t,9304))},9304:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var l=t(5155),r=t(63),n=t(2115),i=t(2619),a=t.n(i),o=t(907),d=t(9803);function u(){let{slug:e}=(0,r.useParams)(),[s,t]=(0,n.useState)(null),[i,u]=(0,n.useState)(!0),[c,x]=(0,n.useState)(null),[m,b]=(0,n.useState)([]),[h,g]=(0,n.useState)(!1),[f,v]=(0,n.useState)(null),[p,j]=(0,n.useState)(null),N=(0,d.useSession)();async function w(){if(v(null),!(null==N?void 0:N.user))return void v("Please sign in to save gigs.");let e=(0,o.l)();if(h){if(!p)return;let{error:s}=await e.from("saved_gigs").delete().eq("id",p);s?v("Could not unsave. Try again."):(g(!1),j(null),v("Removed from saved."))}else{let{data:t,error:l}=await e.from("saved_gigs").insert([{user_id:N.user.id,gig_id:s.id}]).select("id").single();l?v("Already saved or error occurred."):(g(!0),j(t.id),v("Saved!"))}}return((0,n.useEffect)(()=>{async function s(){u(!0),x(null);let s=(0,o.l)(),{data:l,error:r}=await s.from("gigs").select("*").eq("slug",e).single();if(r||!l){x("service not found"),t(null),u(!1);return}t(l);let{data:n}=await s.from("gig_packages").select("*").eq("gig_id",l.id).order("tier",{ascending:!0});b(n||[]),u(!1)}e&&s()},[e]),(0,n.useEffect)(()=>{!async function(){if(!(null==N?void 0:N.user)||!(null==s?void 0:s.id)){g(!1),j(null);return}let e=(0,o.l)(),{data:t}=await e.from("saved_gigs").select("id").eq("user_id",N.user.id).eq("gig_id",s.id).single();t&&t.id?(g(!0),j(t.id)):(g(!1),j(null))}()},[N,s]),i)?(0,l.jsx)("main",{className:"bg-neutral-100 min-h-screen font-inter",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-24 text-center text-gray-500 text-lg",children:"Loading..."})}):c||!s?(0,l.jsx)("main",{className:"bg-neutral-100 min-h-screen font-inter",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-24 text-center text-red-500 text-lg",children:c||"service not found"})}):(0,l.jsx)("main",{className:"bg-neutral-100 min-h-screen font-inter",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-12 pt-24 md:pt-28",children:[(0,l.jsxs)("nav",{className:"text-sm text-gray-500 mb-6 flex items-center gap-2",children:[(0,l.jsx)(a(),{href:"/",className:"hover:text-blue-700",children:"Home"}),(0,l.jsx)("span",{children:"/"}),(0,l.jsx)(a(),{href:"/browse",className:"hover:text-blue-700",children:"Browse"}),(0,l.jsx)("span",{children:"/"}),(0,l.jsx)("span",{className:"text-gray-700 font-semibold",children:s.title})]}),(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row gap-10",children:[(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:s.title}),(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,l.jsx)("span",{className:"text-blue-700 font-semibold",children:s.category}),s.tags&&s.tags.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-gray-400",children:"|"}),(0,l.jsx)("span",{className:"flex gap-2 flex-wrap",children:s.tags.map((e,s)=>(0,l.jsxs)("span",{className:"px-2 py-0.5 rounded bg-blue-50 text-blue-700 text-xs font-semibold",children:["#",e]},s))})]})]}),s.cover_image_url&&(0,l.jsx)("img",{src:s.cover_image_url,alt:s.title,className:"w-full h-80 object-cover rounded-2xl shadow mb-8 border border-blue-100"}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2 text-blue-700",children:"Service Description"}),(0,l.jsx)("p",{className:"text-gray-800 text-lg",children:s.description})]}),s.media_urls&&s.media_urls.length>0&&(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2 text-blue-700",children:"Gallery"}),(0,l.jsx)("div",{className:"flex gap-3 flex-wrap",children:s.media_urls.map((e,s)=>e.match(/\.(mp4|webm|ogg)$/i)?(0,l.jsx)("video",{src:e,className:"w-40 h-28 rounded object-cover border",controls:!0},s):(0,l.jsx)("img",{src:e,className:"w-40 h-28 rounded object-cover border",alt:"Media"},s))})]}),m&&m.length>0&&(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2 text-blue-700",children:"Packages"}),(0,l.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:m.map((e,s)=>(0,l.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"font-semibold mb-1",children:e.tier}),(0,l.jsxs)("div",{className:"text-blue-700 font-bold text-lg mb-1",children:["$",(e.price_cents/100).toFixed(2)]}),(0,l.jsx)("div",{className:"text-gray-700 text-sm mb-1",children:e.description}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["Delivery: ",e.delivery_days," day(s)"]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["Revisions: ",e.revisions]})]},e.tier))})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-4 mb-12",children:[(0,l.jsx)("button",{className:"px-8 py-4 rounded-full bg-blue-700 text-white font-bold text-lg shadow hover:bg-blue-800 transition",children:"Order Now"}),(0,l.jsx)("button",{className:"px-8 py-4 rounded-full bg-white text-blue-700 font-bold text-lg shadow border border-blue-700 hover:bg-blue-50 transition",children:"Contact Seller"}),(0,l.jsx)("button",{className:"px-8 py-4 rounded-full font-semibold text-lg shadow border transition ".concat(h?"bg-green-100 text-green-700 border-green-200":"bg-gray-100 text-gray-700 border-gray-200 hover:bg-gray-200"),onClick:w,children:h?"SAVED":"Save for Later"}),f&&(0,l.jsx)("div",{className:"text-blue-700 mt-2",children:f})]})]}),(0,l.jsx)("aside",{className:"w-full lg:w-[350px] flex-shrink-0",children:(0,l.jsxs)("div",{className:"sticky top-24",children:[(0,l.jsx)("div",{className:"bg-white rounded-2xl shadow-xl border border-blue-100 p-8 mb-8",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-24 h-24 rounded-full bg-blue-100 flex items-center justify-center text-3xl text-blue-700 mb-3",children:(0,l.jsx)("span",{children:"\uD83D\uDC64"})}),(0,l.jsx)("div",{className:"font-bold text-lg text-blue-700 mb-1",children:"Freelancer"}),(0,l.jsx)("div",{className:"text-gray-700 font-medium mb-2",children:"Seller info coming soon"})]})}),(0,l.jsxs)("div",{className:"bg-blue-50 rounded-2xl shadow border border-blue-100 p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Starting at"}),(0,l.jsx)("span",{className:"text-2xl font-bold text-blue-700",children:m&&m.length>0?"$".concat((m[0].price_cents/100).toFixed(2)):"$0.00"})]}),(0,l.jsx)("button",{className:"w-full mt-4 px-6 py-3 rounded-full bg-blue-700 text-white font-bold text-lg shadow hover:bg-blue-800 transition",children:"Continue to Order"}),(0,l.jsx)("button",{className:"w-full mt-3 px-6 py-3 rounded-full bg-white text-blue-700 font-bold text-lg shadow border border-blue-700 hover:bg-blue-50 transition",children:"Ask a Question"})]})]})})]})]})})}},9803:(e,s,t)=>{"use strict";var l=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a={};((e,s)=>{for(var t in s)l(e,t,{get:s[t],enumerable:!0})})(a,{SessionContextProvider:()=>c,useSession:()=>b,useSessionContext:()=>x,useSupabaseClient:()=>m,useUser:()=>h}),e.exports=((e,s,t,a)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let t of n(s))i.call(e,t)||void 0===t||l(e,t,{get:()=>s[t],enumerable:!(a=r(s,t))||a.enumerable});return e})(l({},"__esModule",{value:!0}),a);var o=t(2115),d=t(5155),u=(0,o.createContext)({isLoading:!0,session:null,error:null,supabaseClient:{}}),c=({supabaseClient:e,initialSession:s=null,children:t})=>{let[l,r]=(0,o.useState)(s),[n,i]=(0,o.useState)(!s),[a,c]=(0,o.useState)();(0,o.useEffect)(()=>{!l&&s&&r(s)},[l,s]),(0,o.useEffect)(()=>{let s=!0;return!function(){let t,l;t=this,l=function*(){let{data:{session:t},error:l}=yield e.auth.getSession();if(s){if(l){c(l),i(!1);return}r(t),i(!1)}},new Promise((e,s)=>{var r=e=>{try{i(l.next(e))}catch(e){s(e)}},n=e=>{try{i(l.throw(e))}catch(e){s(e)}},i=s=>s.done?e(s.value):Promise.resolve(s.value).then(r,n);i((l=l.apply(t,null)).next())})}(),()=>{s=!1}},[]),(0,o.useEffect)(()=>{let{data:{subscription:s}}=e.auth.onAuthStateChange((e,s)=>{s&&("SIGNED_IN"===e||"TOKEN_REFRESHED"===e||"USER_UPDATED"===e)&&r(s),"SIGNED_OUT"===e&&r(null)});return()=>{s.unsubscribe()}},[]);let x=(0,o.useMemo)(()=>n?{isLoading:!0,session:null,error:null,supabaseClient:e}:a?{isLoading:!1,session:null,error:a,supabaseClient:e}:{isLoading:!1,session:l,error:null,supabaseClient:e},[n,l,a]);return(0,d.jsx)(u.Provider,{value:x,children:t})},x=()=>{let e=(0,o.useContext)(u);if(void 0===e)throw Error("useSessionContext must be used within a SessionContextProvider.");return e};function m(){let e=(0,o.useContext)(u);if(void 0===e)throw Error("useSupabaseClient must be used within a SessionContextProvider.");return e.supabaseClient}var b=()=>{let e=(0,o.useContext)(u);if(void 0===e)throw Error("useSession must be used within a SessionContextProvider.");return e.session},h=()=>{var e,s;let t=(0,o.useContext)(u);if(void 0===t)throw Error("useUser must be used within a SessionContextProvider.");return null!=(s=null==(e=t.session)?void 0:e.user)?s:null}}},e=>{e.O(0,[2619,7559,8441,1255,7358],()=>e(e.s=8002)),_N_E=e.O()}]);