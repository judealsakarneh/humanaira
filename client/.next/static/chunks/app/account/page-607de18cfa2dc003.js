(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1298],{63:(e,t,l)=>{"use strict";var a=l(7260);l.o(a,"useParams")&&l.d(t,{useParams:function(){return a.useParams}}),l.o(a,"useRouter")&&l.d(t,{useRouter:function(){return a.useRouter}})},907:(e,t,l)=>{"use strict";l.d(t,{l:()=>s});var a=l(7559);function s(){return(0,a.createBrowserClient)("https://ekjxetwphxedvoeywebe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVranhldHdwaHhlZHZvZXl3ZWJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzOTI5OTgsImV4cCI6MjA3MDk2ODk5OH0.N6snPBUY7YX5ZVyRTTuPJ_hHJk9-iLwoyzJinZzBCMc")}},2332:(e,t,l)=>{Promise.resolve().then(l.bind(l,7035))},7035:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var a=l(5155),s=l(2115),n=l(63),r=l(907);let i=[{label:"Bold",command:"bold",icon:(0,a.jsx)("b",{children:"B"})},{label:"Italic",command:"italic",icon:(0,a.jsx)("i",{children:"I"})},{label:"Underline",command:"underline",icon:(0,a.jsx)("u",{children:"U"})},{label:"Bullet List",command:"insertUnorderedList",icon:(0,a.jsx)("span",{children:"• List"})},{label:"Numbered List",command:"insertOrderedList",icon:(0,a.jsx)("span",{children:"1. List"})},{label:"Link",command:"createLink",icon:(0,a.jsx)("span",{children:"\uD83D\uDD17"})}];function o(){let[e,t]=(0,s.useState)(null),[l,o]=(0,s.useState)(!0),[d,u]=(0,s.useState)(""),[c,b]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),[p,f]=(0,s.useState)(""),[v,j]=(0,s.useState)("en"),[N,w]=(0,s.useState)(!1),[y,k]=(0,s.useState)(""),[C,I]=(0,s.useState)([]),S=(0,s.useRef)(null),_=(0,s.useRef)(null),L=(0,r.l)(),F=(0,n.useRouter)();async function D(t){var l;let a=null==(l=t.target.files)?void 0:l[0];if(!a)return;w(!0);let s=a.name.split(".").pop(),n="".concat(e.id,".").concat(s),{error:r}=await L.storage.from("avatars").upload(n,a,{upsert:!0});if(r){k("Failed to upload avatar."),w(!1);return}let{data:i}=L.storage.from("avatars").getPublicUrl(n);x(i.publicUrl),w(!1)}async function M(e){e.preventDefault(),w(!0),k("");let{error:t}=await L.auth.updateUser({data:{name:d,avatar_url:m,isFreelancer:h,bio:p,language:v},email:c});w(!1),t?k("Failed to update profile."):(k("Profile updated!"),F.refresh())}async function U(){w(!0),k("");let{error:t}=await L.auth.updateUser({data:{...e.user_metadata,isFreelancer:!0}});w(!1),t?k("Failed to update status."):(g(!0),k("You are now a freelancer!"),F.refresh())}return((0,s.useEffect)(()=>{async function e(e){let{data:t,error:l}=await L.from("gigs").select("*").eq("user_id",e).order("created_at",{ascending:!1});!l&&t&&I(t)}!async function(){let{data:{user:l}}=await L.auth.getUser();if(l){var a,s,n,r,i;t(l),u((null==(a=l.user_metadata)?void 0:a.name)||""),b(l.email||""),x((null==(s=l.user_metadata)?void 0:s.avatar_url)||""),g((null==(n=l.user_metadata)?void 0:n.isFreelancer)||!1),f((null==(r=l.user_metadata)?void 0:r.bio)||""),j((null==(i=l.user_metadata)?void 0:i.language)||"en"),e(l.id)}o(!1)}()},[]),(0,s.useEffect)(()=>{_.current&&_.current.innerHTML!==p&&(_.current.innerHTML=p)},[p]),l)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsx)("span",{className:"text-lg text-gray-500",children:"Loading..."})}):e?(0,a.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-[#090a10] via-[#07102a] to-[#123055] text-gray-100 font-inter relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"pointer-events-none absolute inset-0 z-0",children:[(0,a.jsx)("div",{className:"absolute -top-32 -left-32 w-96 h-96 bg-blue-300 rounded-full blur-[120px] opacity-40"}),(0,a.jsx)("div",{className:"absolute -bottom-40 -right-40 w-96 h-96 bg-blue-500 rounded-full blur-[120px] opacity-30"}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-40 bg-blue-100 rounded-full blur-[80px] opacity-25"})]}),(0,a.jsxs)("section",{className:"relative z-10 max-w-2xl mx-auto px-4 py-20 pt-28",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-extrabold mb-8 text-center text-blue-200 tracking-tight",children:"Account Settings"}),(0,a.jsxs)("form",{onSubmit:M,className:"bg-[#181a23]/90 rounded-2xl shadow-xl border border-blue-900 p-8 flex flex-col gap-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[(0,a.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,a.jsx)("img",{src:m||"/avatar-placeholder.png",alt:"Avatar",className:"w-20 h-20 rounded-full object-cover border-2 border-blue-900 shadow"}),(0,a.jsx)("button",{type:"button",className:"absolute bottom-0 right-0 bg-blue-700 text-white rounded-full p-2 text-xs hover:bg-blue-800 shadow",onClick:()=>{var e;return null==(e=S.current)?void 0:e.click()},title:"Change avatar",children:"✏️"}),(0,a.jsx)("input",{type:"file",accept:"image/*",className:"hidden",ref:S,onChange:D})]}),(0,a.jsxs)("div",{className:"flex-1 w-full",children:[(0,a.jsx)("label",{className:"block text-blue-100 font-semibold mb-1",htmlFor:"name",children:"Name"}),(0,a.jsx)("input",{id:"name",type:"text",className:"w-full px-4 py-3 rounded-lg border border-blue-800 bg-[#07102a] text-white text-base focus:outline-none focus:ring-2 focus:ring-blue-500",value:d,onChange:e=>u(e.target.value),autoComplete:"name",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-blue-100 font-semibold mb-1",htmlFor:"email",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",className:"w-full px-4 py-3 rounded-lg border border-blue-800 bg-[#07102a] text-white text-base focus:outline-none focus:ring-2 focus:ring-blue-500",value:c,onChange:e=>b(e.target.value),autoComplete:"email",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-blue-100 font-semibold mb-1",htmlFor:"bio",children:"Summary"}),(0,a.jsx)("div",{className:"mb-2 flex gap-2 flex-wrap",children:i.map(e=>(0,a.jsx)("button",{type:"button",className:"px-2 py-1 rounded bg-blue-950 text-blue-200 hover:bg-blue-900 border border-blue-800 text-sm font-semibold",title:e.label,tabIndex:-1,onMouseDown:t=>{t.preventDefault();var l=e.command;if("createLink"===l){let e=prompt("Enter the link URL:");e&&document.execCommand(l,!1,e)}else document.execCommand(l)},children:e.icon},e.command))}),(0,a.jsx)("div",{id:"bio",ref:_,className:"w-full min-h-[100px] px-4 py-3 rounded-lg border border-blue-800 bg-[#07102a] text-white text-base focus:outline-none focus:ring-2 focus:ring-blue-500 prose prose-blue max-w-none",contentEditable:!0,suppressContentEditableWarning:!0,onInput:function(){var e;f((null==(e=_.current)?void 0:e.innerHTML)||"")},spellCheck:!0,"aria-label":"Summary",style:{whiteSpace:"pre-wrap"}}),(0,a.jsx)("div",{className:"text-xs text-blue-300 mt-1",children:"You can highlight, bold, italic, add lists, and links. This will be shown as your summary."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-blue-100 font-semibold mb-1",htmlFor:"language",children:"Preferred Language"}),(0,a.jsxs)("select",{id:"language",className:"w-full px-4 py-3 rounded-lg border border-blue-800 bg-[#07102a] text-white text-base focus:outline-none focus:ring-2 focus:ring-blue-500",value:v,onChange:e=>j(e.target.value),children:[(0,a.jsx)("option",{value:"en",children:"English"}),(0,a.jsx)("option",{value:"ar",children:"Arabic"})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",className:"px-8 py-3 rounded-full bg-blue-700 text-white font-bold text-lg shadow hover:bg-blue-800 transition disabled:opacity-60",disabled:N,children:N?"Saving...":"Save Changes"})}),y&&(0,a.jsx)("div",{className:"absolute left-1/2 -top-8 -translate-x-1/2 px-6 py-2 rounded-full shadow font-semibold text-center ".concat(y.includes("Failed")?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:y})]}),h?(0,a.jsxs)("div",{className:"mt-12",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-200",children:"Freelancer Dashboard"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("a",{href:"/seller/gigs/new",className:"px-6 py-3 rounded-md bg-blue-700 text-white font-semibold hover:bg-blue-800 transition text-center",children:"Post a New Gig"}),(0,a.jsx)("a",{href:"/seller/gigs",className:"px-6 py-3 rounded-md bg-blue-950 text-blue-200 font-semibold hover:bg-blue-900 transition text-center",children:"Manage My Gigs"}),(0,a.jsx)("a",{href:"/seller/orders",className:"px-6 py-3 rounded-md bg-blue-950 text-blue-200 font-semibold hover:bg-blue-900 transition text-center",children:"My Orders"})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-blue-100 mb-2",children:"My Gigs"}),0===C.length?(0,a.jsx)("div",{className:"text-blue-300",children:"You have not posted any gigs yet."}):(0,a.jsx)("ul",{className:"space-y-4",children:C.map(e=>{var t;return(0,a.jsxs)("li",{className:"bg-[#10131e] border border-blue-800 rounded-xl p-4 flex items-center gap-4",children:[(0,a.jsx)("img",{src:e.cover_image_url||"/default-gig.png",alt:e.title,className:"w-16 h-16 rounded-lg object-cover border"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-semibold text-blue-200",children:e.title}),(0,a.jsx)("div",{className:"text-blue-400 text-sm",children:e.category}),(0,a.jsx)("div",{className:"text-blue-300 text-xs",children:null==(t=e.tags)?void 0:t.join(", ")})]}),(0,a.jsx)("a",{href:"/seller/gigs/".concat(e.slug),className:"px-4 py-2 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-800 transition",children:"View"})]},e.id)})})]})]}):(0,a.jsx)("div",{className:"mt-12 text-center",children:(0,a.jsx)("button",{className:"px-8 py-3 rounded-full bg-green-600 text-white font-semibold shadow hover:bg-green-700 transition",onClick:U,disabled:N,children:"Become a Freelancer"})}),(0,a.jsxs)("div",{className:"mt-12 bg-[#181a23]/90 rounded-2xl shadow border border-red-900 p-6 mb-0",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-red-400 mb-2",children:"Danger Zone"}),(0,a.jsx)("p",{className:"text-blue-200 mb-4",children:"Delete your account and all your data. This action cannot be undone."}),(0,a.jsx)("button",{className:"px-6 py-2 rounded-full bg-red-700 text-white font-semibold shadow hover:bg-red-800 transition",onClick:()=>alert("Account deletion is not implemented in this demo."),children:"Delete Account"})]})]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[(0,a.jsx)("span",{className:"text-lg text-gray-500 mb-4",children:"You must be signed in to view your account."}),(0,a.jsx)("button",{className:"px-6 py-3 rounded-md bg-blue-600 text-white font-semibold hover:bg-blue-700 transition",onClick:()=>F.push("/login"),children:"Sign In"})]})}}},e=>{e.O(0,[7559,8441,1255,7358],()=>e(e.s=2332)),_N_E=e.O()}]);