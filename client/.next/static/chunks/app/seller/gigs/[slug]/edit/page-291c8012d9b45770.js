(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7398],{63:(e,t,l)=>{"use strict";var s=l(7260);l.o(s,"useParams")&&l.d(t,{useParams:function(){return s.useParams}}),l.o(s,"useRouter")&&l.d(t,{useRouter:function(){return s.useRouter}})},611:(e,t,l)=>{Promise.resolve().then(l.bind(l,9747))},907:(e,t,l)=>{"use strict";l.d(t,{l:()=>r});var s=l(7559);function r(){return(0,s.createBrowserClient)("https://ekjxetwphxedvoeywebe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVranhldHdwaHhlZHZvZXl3ZWJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzOTI5OTgsImV4cCI6MjA3MDk2ODk5OH0.N6snPBUY7YX5ZVyRTTuPJ_hHJk9-iLwoyzJinZzBCMc")}},9747:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>c});var s=l(5155),r=l(2115),a=l(63),i=l(2619),o=l.n(i),n=l(907);let d=["Writing","Design","Voiceover","Automations","Videos","Other"];function c(){let{slug:e}=(0,a.useParams)(),[t,l]=(0,r.useState)(null),[i,c]=(0,r.useState)(!0),[u,x]=(0,r.useState)(!1),[b,m]=(0,r.useState)(""),[g,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[w,N]=(0,r.useState)(d[0]),[y,k]=(0,r.useState)(""),[S,I]=(0,r.useState)("1"),[_,C]=(0,r.useState)([]),[O,J]=(0,r.useState)([]),[M,P]=(0,r.useState)([]),D=(0,r.useRef)(null),R=(0,a.useRouter)();async function U(e){if(e.preventDefault(),x(!0),m(""),h(!1),!f||!v||!w||!y||!S){m("Please fill in all fields."),x(!1);return}let l=[];if(_.length>0){let e=(0,n.l)();for(let s of _){let r=s.name.split(".").pop(),a="gigs/".concat(t.seller_id,"-").concat(Date.now(),"-").concat(Math.random().toString(36).slice(2),".").concat(r),{error:i}=await e.storage.from("gigs").upload(a,s,{upsert:!0});if(i){m("Media upload failed."),x(!1),console.error(i);return}let{data:o}=e.storage.from("gigs").getPublicUrl(a);l.push(o.publicUrl)}}let s=[...M,...l],r=(0,n.l)(),{error:a}=await r.from("gigs").update({title:f,description:v,category:w,price_cents:Math.round(100*Number(y)),delivery_time_days:Number(S),cover_image_url:s[0]||"",media_urls:s,updated_at:new Date().toISOString()}).eq("id",t.id);x(!1),a?m("Failed to update gig: "+(a.message||"Unknown error")):(h(!0),m("Gig updated successfully!"),setTimeout(()=>R.push("/seller/gigs/".concat(t.slug)),1400))}return(0,r.useEffect)(()=>{async function t(){let t=(0,n.l)(),{data:s,error:r}=await t.from("gigs").select("*").eq("slug",e).single();!r&&s&&(l(s),p(s.title),j(s.description),N(s.category),k((s.price_cents/100).toString()),I(s.delivery_time_days.toString()),P(s.media_urls||[])),c(!1)}e&&t()},[e]),i?(0,s.jsx)("div",{className:"pt-24 text-center text-blue-600",children:"Loading gig..."}):t?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-white to-blue-300 flex items-center justify-center pt-40 pb-12 px-2",children:(0,s.jsxs)("div",{className:"relative w-full max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 flex flex-col items-center z-10",children:[(0,s.jsx)("div",{className:"animate-pulse bg-gradient-to-r from-blue-500 to-blue-300 w-28 h-2 rounded-full mb-2"}),(0,s.jsx)("div",{className:"bg-blue-100 p-3 rounded-full shadow-lg",children:(0,s.jsxs)("svg",{width:"40",height:"40",fill:"none",viewBox:"0 0 40 40",children:[(0,s.jsx)("rect",{width:"40",height:"40",rx:"20",fill:"#3B82F6",fillOpacity:"0.15"}),(0,s.jsx)("path",{d:"M14 28v-2a6 6 0 016-6h0a6 6 0 016 6v2",stroke:"#2563EB",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("circle",{cx:"20",cy:"17",r:"5",stroke:"#2563EB",strokeWidth:"2"})]})})]}),(0,s.jsxs)("main",{className:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-2xl border border-blue-100 px-8 py-12 pt-32",children:[(0,s.jsx)(o(),{href:"/seller/gigs/".concat(t.slug),className:"text-blue-600 hover:underline mb-4 inline-block text-sm",children:"â† Back to Gig"}),(0,s.jsx)("h1",{className:"text-4xl font-extrabold text-blue-900 mb-2 text-center tracking-tight drop-shadow",children:"Edit Gig"}),(0,s.jsx)("p",{className:"text-center text-blue-500 mb-8 text-lg font-medium",children:"Update your gig details and media"}),(0,s.jsxs)("form",{onSubmit:U,className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-blue-900 font-semibold mb-1",children:"Title"}),(0,s.jsx)("input",{type:"text",className:"w-full px-4 py-3 rounded-xl border border-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white/90 text-gray-900 text-lg transition",value:f,onChange:e=>p(e.target.value),required:!0,maxLength:80,placeholder:"e.g. I will design a modern logo"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-blue-900 font-semibold mb-1",children:"Description"}),(0,s.jsx)("textarea",{className:"w-full px-4 py-3 rounded-xl border border-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white/90 text-gray-900 text-lg transition",value:v,onChange:e=>j(e.target.value),required:!0,rows:4,maxLength:1e3,placeholder:"Describe your gig in detail..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-blue-900 font-semibold mb-1",children:"Category"}),(0,s.jsx)("select",{className:"w-full px-4 py-3 rounded-xl border border-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white/90 text-gray-900 text-lg transition",value:w,onChange:e=>N(e.target.value),required:!0,children:d.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-blue-900 font-semibold mb-1",children:"Price (USD)"}),(0,s.jsx)("input",{type:"number",min:1,className:"w-full px-4 py-3 rounded-xl border border-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white/90 text-gray-900 text-lg transition",value:y,onChange:e=>k(e.target.value),required:!0,placeholder:"e.g. 25"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-blue-900 font-semibold mb-1",children:"Delivery Time (days)"}),(0,s.jsx)("input",{type:"number",min:1,max:30,className:"w-full px-4 py-3 rounded-xl border border-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white/90 text-gray-900 text-lg transition",value:S,onChange:e=>I(e.target.value),required:!0,placeholder:"e.g. 2"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-blue-900 font-semibold mb-1",children:"Existing Media"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 mt-2",children:[0===M.length&&(0,s.jsx)("div",{className:"text-gray-400",children:"No media"}),M.map((e,t)=>{let l=e.match(/\.(mp4|webm|ogg)$/i);return(0,s.jsxs)("div",{className:"relative group",children:[l?(0,s.jsx)("video",{src:e,controls:!0,className:"w-24 h-24 rounded-xl object-cover border border-blue-200 shadow"}):(0,s.jsx)("img",{src:e,alt:"Gig Media",className:"w-24 h-24 rounded-xl object-cover border border-blue-200 shadow"}),(0,s.jsx)("button",{type:"button",onClick:()=>{P(M.filter((e,l)=>l!==t))},className:"absolute top-1 right-1 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-80 hover:opacity-100 transition",title:"Remove",children:"\xd7"})]},t)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-blue-900 font-semibold mb-1",children:"Add New Media (Images & Videos)"}),(0,s.jsx)("input",{type:"file",accept:"image/*,video/*",multiple:!0,className:"block",ref:D,onChange:function(e){let t=e.target.files;if(!t)return;let l=Array.from(t);C(l),J(l.map(e=>URL.createObjectURL(e)))}}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4 mt-2",children:O.map((e,t)=>{var l;return(null==(l=_[t])?void 0:l.type.startsWith("video"))?(0,s.jsx)("video",{src:e,controls:!0,className:"w-24 h-24 rounded-xl object-cover border border-blue-200 shadow"},t):(0,s.jsx)("img",{src:e,alt:"Preview",className:"w-24 h-24 rounded-xl object-cover border border-blue-200 shadow"},t)})})]}),(0,s.jsx)("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-gradient-to-r from-blue-600 to-blue-400 text-white font-bold text-lg shadow hover:scale-105 hover:from-blue-700 hover:to-blue-500 transition-all duration-200",disabled:u,children:u?"Saving...":"Save Changes"}),b&&(0,s.jsx)("div",{className:"text-center font-medium mt-2 transition-all duration-300 ".concat(g?"text-green-600 text-xl animate-bounce":"text-blue-600"),children:b})]})]})]})}):(0,s.jsx)("div",{className:"pt-24 text-center text-gray-500",children:"Gig not found."})}}},e=>{e.O(0,[2619,7559,8441,1255,7358],()=>e(e.s=611)),_N_E=e.O()}]);