(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9969],{561:(e,s,l)=>{Promise.resolve().then(l.bind(l,8783))},2952:(e,s,l)=>{"use strict";l.d(s,{l:()=>i});var t=l(3254);function i(){return(0,t.createBrowserClient)("https://ekjxetwphxedvoeywebe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVranhldHdwaHhlZHZvZXl3ZWJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzOTI5OTgsImV4cCI6MjA3MDk2ODk5OH0.N6snPBUY7YX5ZVyRTTuPJ_hHJk9-iLwoyzJinZzBCMc")}},5695:(e,s,l)=>{"use strict";var t=l(8999);l.o(t,"useParams")&&l.d(s,{useParams:function(){return t.useParams}}),l.o(t,"useRouter")&&l.d(s,{useRouter:function(){return t.useRouter}})},8783:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>c});var t=l(5155),i=l(5695),r=l(6874),a=l.n(r),d=l(2115),n=l(2952);function c(){let{slug:e}=(0,i.useParams)(),s=(0,i.useRouter)(),[l,r]=(0,d.useState)(null),[c,o]=(0,d.useState)([]),[u,m]=(0,d.useState)(!0),[x,g]=(0,d.useState)(!1),[h,b]=(0,d.useState)(""),[f,v]=(0,d.useState)(null);async function j(){if(!l||!confirm("Are you sure you want to delete this gig?"))return;g(!0),b("");let e=(0,n.l)(),{error:t}=await e.from("gigs").delete().eq("id",l.id);g(!1),t?(b("Failed to delete gig. Please try again."),console.error(t)):s.push("/seller/gigs")}return((0,d.useEffect)(()=>{let s=(0,n.l)();async function l(){let{data:l,error:t}=await s.from("gigs").select("id,title,description,cover_image_url,media_urls,seller_id,category").eq("slug",e).single();if(t||r(l),l){let{data:e}=await s.from("gig_packages").select("*").eq("gig_id",l.id);o(e||[])}m(!1)}async function t(){var e,l;let{data:t}=await s.auth.getUser();v(null!=(l=null==t||null==(e=t.user)?void 0:e.id)?l:null)}e&&l(),t()},[e]),u)?(0,t.jsx)("div",{className:"pt-32 text-center text-blue-600",children:"Loading gig..."}):l?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-16 px-2",children:(0,t.jsxs)("main",{className:"max-w-6xl mx-auto bg-white border border-gray-200 rounded-2xl shadow-lg flex flex-col md:flex-row overflow-hidden",children:[(0,t.jsx)("div",{className:"md:w-1/2 w-full bg-gray-100 flex flex-col items-center justify-center p-8",children:l.media_urls&&l.media_urls.length>0?(0,t.jsx)("div",{className:"flex flex-col gap-4 w-full",children:l.media_urls.map((e,s)=>e.match(/\.(mp4|webm|ogg)$/i)?(0,t.jsx)("video",{src:e,controls:!0,className:"w-full h-72 rounded-xl object-cover border"},s):(0,t.jsx)("img",{src:e,alt:"Gig Media",className:"w-full h-72 rounded-xl object-cover border"},s))}):l.cover_image_url?(0,t.jsx)("img",{src:l.cover_image_url,alt:"",className:"w-full h-72 object-cover rounded-xl border"}):(0,t.jsx)("div",{className:"w-full h-72 bg-blue-50 rounded-xl flex items-center justify-center text-blue-200 text-lg",children:"No media"})}),(0,t.jsxs)("div",{className:"md:w-1/2 w-full p-8 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-blue-900 mb-2",children:l.title}),(0,t.jsx)("div",{className:"text-sm text-blue-700 mb-4",children:l.category}),(0,t.jsx)("p",{className:"text-gray-700 whitespace-pre-line mb-6",children:l.description}),(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Packages"}),(0,t.jsx)("div",{className:"grid md:grid-cols-1 gap-4",children:(c||[]).map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 mb-2 bg-gray-50",children:[(0,t.jsx)("div",{className:"font-semibold mb-1",children:e.tier}),(0,t.jsxs)("div",{className:"text-2xl font-bold mb-1 text-blue-800",children:["$",(e.price_cents/100).toFixed(2)]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Delivery: ",e.delivery_days," days"]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 mb-3",children:["Revisions: ",e.revisions]}),(0,t.jsxs)("form",{action:"/checkout",method:"GET",children:[(0,t.jsx)("input",{type:"hidden",name:"gigId",value:l.id}),(0,t.jsx)("input",{type:"hidden",name:"tier",value:e.tier}),(0,t.jsx)("button",{className:"mt-2 w-full bg-blue-700 text-white rounded py-2 font-semibold hover:bg-blue-800 transition",children:"Continue"})]})]},e.id))}),h&&(0,t.jsx)("div",{className:"text-red-600 mt-4",children:h})]}),f===l.seller_id&&(0,t.jsxs)("div",{className:"flex gap-4 mt-8",children:[(0,t.jsx)(a(),{href:"/seller/gigs/".concat(l.slug,"/edit"),className:"px-6 py-2 rounded-md bg-blue-600 text-white font-semibold hover:bg-blue-700 transition text-center",children:"Edit"}),(0,t.jsx)("button",{onClick:j,disabled:x,className:"px-6 py-2 rounded-md bg-red-600 text-white font-semibold hover:bg-red-700 transition text-center",children:x?"Deleting...":"Delete"})]}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(a(),{href:"/browse",className:"text-sm text-blue-700 underline hover:text-blue-900",children:"← Back to Browse"})})]})]})}):(0,t.jsx)("div",{className:"p-10",children:"Gig not found"})}}},e=>{e.O(0,[6874,3254,8441,5964,7358],()=>e(e.s=561)),_N_E=e.O()}]);