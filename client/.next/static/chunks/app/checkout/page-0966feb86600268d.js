(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8279],{5880:(e,t,n)=>{Promise.resolve().then(n.bind(n,7212))},7212:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(5155),i=n(2115),s=n(4511),a=n(8206);let l=(0,s.c)("pk_test_...");function o(e){let{gigId:t,tier:n}=e,s=(0,a.useStripe)(),l=(0,a.useElements)(),[o,c]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{let e=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gigId:t,tier:n})}),r=await e.json();r.clientSecret?c(r.clientSecret):alert(r.error||"Error")})()},[t,n]);let u=async e=>{if(e.preventDefault(),!s||!l)return;let{error:t}=await s.confirmPayment({elements:l,confirmParams:{return_url:window.location.origin+"/orders"}});t&&alert(t.message)};return o?(0,r.jsxs)("form",{onSubmit:u,className:"max-w-md mx-auto pt-10",children:[(0,r.jsx)(a.PaymentElement,{}),(0,r.jsx)("button",{className:"mt-4 px-4 py-2 bg-black text-white rounded",disabled:!s,children:"Pay"})]}):(0,r.jsx)("p",{children:"Loadingâ€¦"})}function c(e){let{searchParams:t}=e,n=(null==t?void 0:t.gigId)||"",i=(null==t?void 0:t.tier)||"BASIC";return(0,r.jsx)(a.Elements,{stripe:l,options:{appearance:{theme:"stripe"}},children:(0,r.jsx)(o,{gigId:n,tier:i})})}}},e=>{e.O(0,[8356,8441,1255,7358],()=>e(e.s=5880)),_N_E=e.O()}]);